@model OrderTotalsModel
@using SmartStore.Web.Models.ShoppingCart;

@if (Model.MinOrderSubtotalWarning.HasValue() && Model.IsEditable)
{
	<div class="alert alert-warning">
		@Model.MinOrderSubtotalWarning
	</div>
}

@if (Model.ShowConfirmOrderLegalHint && !Model.IsEditable)
{
    <div class="alert alert-warning confirm-order-legal-hint">
        @T("OrderSummary.ConfirmOrderLegalHint")
    </div>
}

<table class="cart-summary">
    @*@if (Model.DisplayWeight)
	{
		<tr class="cart-summary-weight">
			<td class="cart-summary-label">@T("ShoppingCart.Weight"):</td>
			<td class="cart-summary-value">
				<span class="pr-1">@(Model.Weight.ToString("N2"))</span>
				<span>@Model.WeightMeasureUnitName</span>
			</td>
		</tr>
	}*@
	<tr class="cart-summary-subtotal">
		<td class="cart-summary-label">@T("ShoppingCart.Totals.SubTotal"):</td>
		<td class="cart-summary-value">@Model.SubTotal</td>
	</tr>
    @if (Model.SubTotalDiscount.HasValue())
    {
		<tr class="cart-summary-subtotaldiscount cart-summary-pos">
			<td class="cart-summary-label">
				<span class="text-nowrap">
					@if (Model.AllowRemovingSubTotalDiscount)
					{
						<button type="submit"
								class="tooltip-toggle remove-discount-button mr-1"
								title="@T("Common.Remove")"
								name="removesubtotaldiscount"
								value="removesubtotaldiscount">
							<i class="fa">×</i>
						</button>
					}
					@T("ShoppingCart.Totals.SubTotalDiscount"):
				</span>
			</td>
			<td class="cart-summary-value">@Model.SubTotalDiscount</td>
		</tr>
	}
	<tr class="cart-summary-shipping">
		<td class="cart-summary-label">
			<span class="text-nowrap">@T("运费"):</span>
			@if (Model.RequiresShipping && Model.SelectedShippingMethod.HasValue())
			{
				<span class="font-weight-medium">
					@Model.SelectedShippingMethod
				</span>
			}
		</td>
		<td class="cart-summary-value">
			@if (Model.RequiresShipping)
			{
				if (Model.Shipping.HasValue())
				{
					<span class="cart-summary-neg">@Model.Shipping</span>
				}
				else
				{
					<span class="text-muted text-wrap">@T("ShoppingCart.Totals.CalculatedDuringCheckout")</span>
				}
			}
			else
			{
				<span class="text-muted text-wrap">@T("包邮")</span>
			}
		</td>
	</tr>

    @*@if (Model.PaymentMethodAdditionalFee.HasValue())
    {
		<tr class="cart-summary-payfee cart-summary-neg">
			<td class="cart-summary-label">@T("ShoppingCart.Totals.PaymentMethodAdditionalFee"):</td>
			<td class="cart-summary-value">@Model.PaymentMethodAdditionalFee</td>
		</tr>
	}
    @if (Model.DisplayTaxRates && Model.TaxRates.Count > 0)
    {
        foreach (var taxRate in Model.TaxRates)
        {
			<tr class="cart-summary-tax">
				<td class="cart-summary-label">@taxRate.Label:</td>
				<td class="cart-summary-value">@taxRate.Value</td>
			</tr>
		}
	}
    @if (Model.DisplayTax)
    {
		<tr class="cart-summary-tax">
			<td class="cart-summary-label">@T("ShoppingCart.Totals.Tax"):</td>
			<td class="cart-summary-value">@Model.Tax</td>
		</tr>
	}*@
    @if (Model.OrderTotalDiscount.HasValue())
    {
		<tr class="cart-summary-totaldiscount cart-summary-pos">
			<td class="cart-summary-label">
				<span class="text-nowrap">
					@*@if (Model.AllowRemovingOrderTotalDiscount)
					{
						<button type="submit"
								class="tooltip-toggle remove-discount-button mr-1"
								title="@T("Common.Remove")"
								name="removeordertotaldiscount"
								value="removeordertotaldiscount">
							<i class="fa">×</i>
						</button>
					}*@
					@T("ShoppingCart.Totals.OrderTotalDiscount"):
				</span>
			</td>
			<td class="cart-summary-value">@Model.OrderTotalDiscount</td>
		</tr>
	}
    
    @if (Model.RedeemedRewardPoints > 0)
    {
		<tr class="cart-summary-rewardpoints cart-summary-pos">
			<td class="cart-summary-label">@T("积分已抵扣", Model.RedeemedRewardPoints):</td>
			<td class="cart-summary-value">@Model.RedeemedRewardPointsAmount</td>
		</tr>
	}
	@*@if (Model.CreditBalance.HasValue())
	{
		<tr class="cart-summary-credit-balance cart-summary-pos">
			<td class="cart-summary-label">@T("ShoppingCart.Totals.CreditBalance"):</td>
			<td class="cart-summary-value">@Model.CreditBalance</td>
		</tr>
	}*@
    @*@if (Model.OrderTotalRounding.HasValue())
    {
        <tr class="cart-summary-totalrounding cart-summary-pos">
            <td class="cart-summary-label">@T("ShoppingCart.Totals.Rounding"):</td>
            <td class="cart-summary-value">
                <span>@Model.OrderTotalRounding</span>
            </td>
        </tr>
    }*@
	<tr class="cart-summary-total">
		<td class="cart-summary-label">@T("ShoppingCart.Totals.OrderTotal"):</td>
		<td class="cart-summary-value">
			@if (Model.OrderTotal.HasValue())
            {
                var totalStr = @Model.SubTotal.Replace("¥", "").Replace(",", "");
				<span id="OrderTotal" value="@totalStr">@Model.OrderTotal</span>
			}
			else
			{
				<span class="text-muted fs-h6 font-weight-normal text-wrap">@T("ShoppingCart.Totals.CalculatedDuringCheckout")</span>
			}
			
		</td>
	</tr>
</table>
